(()=>{"use strict";var t={415:(t,e,o)=>{o.r(e)},752:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEBUG=void 0;var s=i(o(415)),r=o(777),n=o(769);s.default;var a=new n.Game;e.DEBUG=new r.Debugger(a),a.run()},830:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var i=o(677),s=function(){function t(t,e,o,s,r){this.x=t,this.y=e,this.width=o,this.height=s,this.maxX=r.cols*i.TileMap.TSize-o,this.maxY=r.rows*i.TileMap.TSize-s}return t.prototype.update=function(t,e,o){this.x+=t*o,this.y+=e*o,this.x=Math.max(0,Math.min(this.x,this.maxX)),this.y=Math.max(0,Math.min(this.y,this.maxY))},t}();e.Camera=s},235:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var i=o(752);e.Canvas=function(){function t(e){this.layers=new Map,this.canvas=document.getElementById(e),this.canvas.setAttribute("width",t.Width+""),this.canvas.setAttribute("height",t.Height+""),this.context=this.canvas.getContext("2d")}return t.prototype.getCanvas=function(){return this.canvas},t.prototype.getContext=function(){return this.context},t.prototype.clear=function(){this.context.clearRect(0,0,t.Width,t.Height)},t.prototype.getLayers=function(){return Array.from(this.layers.values()).sort((function(t,e){return e.layer-t.layer}))},t.prototype.addLayer=function(t){return this.layers.has(t.id)?console.warn("Canvas layer ".concat(t.id," already exists")):this.layers.set(t.id,t),this},t.prototype.removeLayer=function(t){this.layers.delete(t)},t.prototype.render=function(t){var e=this;this.getLayers().forEach((function(o){o.hide||(o.render(e.context,t),i.DEBUG.enabled&&o.debug(e.context))}))},t.Width=512,t.Height=512,t}()},777:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Debugger=void 0;var i=o(860),s=o(595),r=o(129),n=function(){function t(t){var e=this;this.enabled=!0,this.debugLayers=[],this.game=t,this.tileSelector=new r.TileSelector,this.debugLayers.push(new s.TilePlacer({id:"tile-placer",hide:!this.enabled,layer:0,tileSelector:this.tileSelector,canvas:this.game.canvas,tileMap:this.game.background})),this.tileMapExporter=new i.TileMapExporter(this.game.background);var o=document.getElementById("debug-input");o.addEventListener("change",(function(t){return e.onChange(t)})),this.enabled&&o.setAttribute("checked",this.enabled+""),this.debugLayers.forEach((function(t){return e.game.canvas.addLayer(t)}))}return t.prototype.onChange=function(t){this.enabled=t.target.checked,this.enabled?(this.tileSelector.show(),this.tileMapExporter.show()):(this.tileSelector.hide(),this.tileMapExporter.hide())},t}();e.Debugger=n},860:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TileMapExporter=void 0;var o=function(){function t(t){var e=this;document.getElementById("tile-map-exporter-btn").addEventListener("click",(function(){return e.exportTileMap(t)}))}return t.prototype.show=function(){document.getElementById("tile-map-exporter").style.display="block"},t.prototype.hide=function(){document.getElementById("tile-map-exporter").style.display="none"},t.prototype.exportTileMap=function(t){var e=t.id+".json",o=JSON.stringify(t.tiles),i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(o)),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},t}();e.TileMapExporter=o},595:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilePlacer=void 0;var i=o(752),s=o(677),r=function(){function t(t){this.x=0,this.y=0,this.prevCol=0,this.prevRow=0,this.id=t.id,this.hide=t.hide,this.layer=t.layer,this.tileSelector=t.tileSelector,this.gameCanvas=t.canvas.getCanvas(),this.gameTileMap=t.tileMap,this.camera=t.tileMap.camera;var e=t.tileMap.cols,o=t.tileMap.rows;this.debugTileMap=new s.TileMap({id:"debug-tile-map",hide:!1,layer:0,tiles:[],cols:e,rows:o}),this.debugTileMap.setCamera(this.camera),this.gameCanvas.addEventListener("mousedown",this.onMouseDown.bind(this)),this.gameCanvas.addEventListener("mousemove",this.onMouseMove.bind(this)),this.gameCanvas.addEventListener("mouseleave",this.onMouseLeave.bind(this))}return t.prototype.render=function(t){i.DEBUG.enabled&&this.debugTileMap.render(t)},t.prototype.onMouseDown=function(t){i.DEBUG.enabled&&0===t.button&&this.setTileOnMap(t,this.gameTileMap)},t.prototype.onMouseMove=function(t){if(i.DEBUG.enabled){var e=Math.floor(this.x/s.TileMap.TSize),o=Math.floor(this.y/s.TileMap.TSize);this.prevCol!==e||this.prevRow!==o?this.debugTileMap.setTile({},this.prevCol,this.prevRow):this.setTileOnMap(t,this.debugTileMap),this.prevCol=e,this.prevRow=o}},t.prototype.onMouseLeave=function(){this.debugTileMap.setTile({},this.prevCol,this.prevRow)},t.prototype.setTileOnMap=function(t,e){var o=this.gameCanvas.getBoundingClientRect();this.x=Math.round(t.clientX-o.left)+this.camera.x,this.y=Math.round(t.clientY-o.top)+this.camera.y;var i=Math.floor(this.x/s.TileMap.TSize),r=Math.floor(this.y/s.TileMap.TSize),n=this.tileSelector.getSelectedTile();n&&e.setTile(n,i,r)},t.prototype.debug=function(){},t}();e.TilePlacer=r},129:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TileSelector=void 0;var s=i(o(685)),r=i(o(969)),n=o(677),a=function(){function t(){var t=this;this.tiles=[],this.tilemapImg=new Image,this.ui=document.getElementById("tile-selector"),this.tilemapImg.src=s.default,this.tiles=r.default,this.tiles.forEach((function(e){var o=document.createElement("img");o.src=s.default,o.width=n.TileMap.TSize,o.height=n.TileMap.TSize;var i="margin-right: 4px; border: solid 2px rgba(0,0,0,0); cursor: pointer; object-fit: cover; object-position: -".concat(e.type*n.TileMap.TSize,"px;");o.style.cssText=i,o.setAttribute("data-tile",e.type+""),o.addEventListener("mousedown",t.onMouseDown.bind(t)),t.ui.append(o)}))}return t.prototype.hide=function(){this.ui.style.display="none"},t.prototype.show=function(){this.ui.style.display="block"},t.prototype.getSelectedTile=function(){return this.selectedTile},t.prototype.onMouseDown=function(t){this.clearSelectedStyle();var e=parseInt(t.target.getAttribute("data-tile"));t.target.style.border="2px solid red",this.selectedTile=this.tiles[e]},t.prototype.clearSelectedStyle=function(){this.ui.childNodes.forEach((function(t){t.style.border="2px solid rgba(0,0,0,0)"}))},t}();e.TileSelector=a},461:function(t,e,o){var i,s=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BlobMonster=void 0;var n=r(o(341)),a=o(372),u=0;e.BlobMonster=function(t){function e(o,i,s){return t.call(this,{id:e.BlobId+u++,hide:!1,layer:2,x:o.x,y:o.y,width:28,height:36,srcX:18,srcY:9,camera:i,imgSrc:n.default,background:s,stats:{speed:1,health:5,attackPower:.5,attackSpeed:20}})||this}return s(e,t),e.BlobId="blob-monster-",e}(a.Monster)},262:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.circleInRectangle=e.pointInRectangle=e.aabbCollision=void 0;var i=o(593);e.aabbCollision=function(t,e,o){var i=o?-o.x:0,s=o?-o.y:0,r=t.x+i<e.b.x&&t.b.x>e.a.x,n=t.y+s<e.c.y&&t.c.y>e.y;return r&&n},e.pointInRectangle=function(t,e){var o=new i.Vector(e.a,e.b),s=new i.Vector(e.a,t),r=new i.Vector(e.b,e.c),n=new i.Vector(e.b,t);return 0<=o.dot(s)&&o.dot(s)<=o.dot(o)&&0<=r.dot(n)&&r.dot(n)<=r.dot(r)},e.circleInRectangle=function(t,e){var o=t.x,i=t.y;t.x<e.a.x?o=e.a.x:t.x>e.b.x&&(o=e.b.x),t.y<e.a.y?i=e.a.y:t.y>e.c.y&&(i=e.c.y);var s=t.x-o,r=t.y-i;return Math.sqrt(s*s+r*r)<=t.radius}},507:function(t,e,o){var i,s=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.GameObject=void 0;var r=o(235),n=o(43),a=o(677),u=o(593),h=o(262),l=function(t){function e(e){var o=t.call(this,e.x,e.y,e.width,e.height)||this;return o.dirX=0,o.dirY=0,o.debugColor=[255,0,0],o.touchingTiles=[],o.outOfBoundsTiles=[],o.id=e.id,o.hide=e.hide,o.layer=e.layer,o.srcX=e.srcX,o.srcY=e.srcY,o.camera=e.camera,o.img=new Image,o.img.src=e.imgSrc,o.background=e.background,o.stats=e.stats,o.vector=new u.Vector(o.center,o.center),o}return s(e,t),e.prototype.move=function(){var t=new u.Rectangle(this.x,this.y,this.width,this.height);this.x+=this.dirX*this.stats.speed;var e=this.collisionDetection();e&&(this.x=t.x),this.y+=this.dirY*this.stats.speed,(e=this.collisionDetection())&&(this.y=t.y),this.vector=new u.Vector(t.center,this.center)},e.prototype.clampValues=function(){this.x=Math.max(0,Math.min(this.x,r.Canvas.Width-this.width+this.camera.x)),this.y=Math.max(0,Math.min(this.y,r.Canvas.Height-this.height+this.camera.y))},e.prototype.collisionDetection=function(){var t=this,e=Math.floor(this.x/a.TileMap.TSize),o=Math.ceil((this.x+this.width)/a.TileMap.TSize),i=Math.floor(this.y/a.TileMap.TSize),s=Math.ceil((this.y+this.height)/a.TileMap.TSize);this.touchingTiles=[],this.outOfBoundsTiles=[];for(var r=e;r<o;r++)for(var u=i;u<s;u++){var l=n.TileHelper.getTile(this.background,r,u);this.touchingTiles.push(l),l.outOfBounds&&this.outOfBoundsTiles.push(l)}var c=!1;return this.outOfBoundsTiles.forEach((function(e){c=(0,h.aabbCollision)(t,e,t.camera)})),c},e.prototype.debug=function(t){var e=this;t.beginPath(),t.strokeStyle=(0,u.rgbArrayToString)(this.debugColor),t.lineWidth=1,t.strokeRect(this.x-this.camera.x,this.y-this.camera.y,this.width,this.height),t.closePath(),this.touchingTiles&&this.touchingTiles.length&&(t.beginPath(),t.strokeStyle=(0,u.rgbArrayToString)(this.debugColor),t.lineWidth=1,this.touchingTiles.forEach((function(o,i){t.strokeRect(o.x,o.y,a.TileMap.TSize,a.TileMap.TSize),t.font="12px sans-serif",t.fillStyle=(0,u.rgbArrayToString)(e.debugColor),t.fillText(i+"",o.x+a.TileMap.TSize/2,o.y+a.TileMap.TSize/2)})),t.closePath()),this.outOfBoundsTiles&&this.outOfBoundsTiles.length&&(t.beginPath(),t.fillStyle=(0,u.rgbArrayToString)((0,u.rgbArrayOpacity)(this.debugColor,.3)),this.outOfBoundsTiles.forEach((function(e){t.fillRect(e.x,e.y,a.TileMap.TSize,a.TileMap.TSize)})),t.closePath())},e}(u.Rectangle);e.GameObject=l},372:function(t,e,o){var i,s=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Monster=void 0;var r=o(677),n=o(743),a=o(593),u=o(507),h=o(262),l=function(t){function e(e){var o=t.call(this,e)||this;return o.detectionRadius=100,o.characterDetected=!1,o.doDamage=!1,o.setDetectionCircle(),o.debugColor=[0,128,0],o}return s(e,t),e.prototype.update=function(t){if(t.gameObjects){var e=t.gameObjects.get(n.Player.PlayerId);e&&(this.detectPlayer(e),this.move(),this.gameObjectsCollisionDetection(t),this.clampValues())}this.setDetectionCircle()},e.prototype.render=function(t,e){this.renderMonster(t,e),this.renderShadow(t)},e.prototype.gameObjectsCollisionDetection=function(t){var e=this;t.gameObjects.forEach((function(o){o.id!==e.id&&(0,h.aabbCollision)(e,o)&&(o.id===n.Player.PlayerId?e.attackPlayer(o,t.tick):(e.x+=-e.vector.x,e.y+=-e.vector.y))}))},e.prototype.attackPlayer=function(t,e){var o=e%this.stats.attackSpeed;0===o&&this.doDamage?(this.doDamage=!1,t.stats.health-=this.stats.attackPower):0!==o&&(this.doDamage=!0)},e.prototype.setDetectionCircle=function(){this.detectionCircle=new a.Circle(this.center,this.detectionRadius)},e.prototype.detectPlayer=function(t){this.characterDetected=(0,h.circleInRectangle)(this.detectionCircle,t),this.dirX=this.dirY=0,this.characterDetected&&(this.x<=t.x-this.width?this.dirX+=1:this.x>=t.x+t.width&&(this.dirX-=1),this.y<=t.y-this.height?this.dirY+=1:this.y>=t.y+t.height&&(this.dirY-=1))},e.prototype.renderMonster=function(t,e){var o=e%4,i=this.srcX+o*r.TileMap.TSize;t.drawImage(this.img,i,this.srcY,this.width,this.height,this.x-this.camera.x,this.y-this.camera.y,this.width,this.height)},e.prototype.renderShadow=function(t){t.beginPath(),t.fillStyle="rgba(0, 0, 0, 0.2)",t.ellipse(this.center.x-this.camera.x,this.y-this.camera.y+this.height-2,this.width/2,5,0,0,180),t.fill()},e.prototype.debug=function(e){t.prototype.debug.call(this,e),e.beginPath(),e.arc(this.center.x-this.camera.x,this.center.y-this.camera.y,this.detectionRadius,(0,a.degToRad)(0),(0,a.degToRad)(360)),e.stroke(),this.characterDetected&&(e.fillStyle=(0,a.rgbArrayToString)((0,a.rgbArrayOpacity)(this.debugColor,.2)),e.fill()),this.vector&&(e.beginPath(),e.moveTo(this.center.x-this.camera.x,this.center.y-this.camera.y),e.lineTo(this.center.x-this.camera.x+50*this.vector.x,this.center.y-this.camera.y+50*this.vector.y),e.stroke())},e}(u.GameObject);e.Monster=l},743:function(t,e,o){var i,s=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0;var n=o(235),a=o(507),u=r(o(6)),h=r(o(360)),l=o(879);e.Player=function(t){function e(o,i,s){var r=t.call(this,{id:e.PlayerId,hide:!1,layer:1,x:o.x,y:o.y,width:34,height:46,srcX:1,srcY:1,camera:i,imgSrc:u.default,background:s,stats:{speed:2,health:10,attackPower:1,attackSpeed:10}})||this;return r.isAttacking=!1,r.attackImg=new Image,r.attackAnimationMap=[0,0,0,0,0],r.debugColor=[255,0,0],window.addEventListener("click",(function(){r.attack()})),r.attackImg.src=h.default,r}return s(e,t),e.prototype.render=function(t,e){this.renderCharacter(t,e),this.renderShadow(t)},e.prototype.update=function(t){this.dirX=this.dirY=0,t.keyboard.isDown(l.Key.Left)&&(this.dirX=-1),t.keyboard.isDown(l.Key.Right)&&(this.dirX=1),t.keyboard.isDown(l.Key.Up)&&(this.dirY=-1),t.keyboard.isDown(l.Key.Down)&&(this.dirY=1),this.move(),this.updateCamera(),this.clampValues()},e.prototype.attack=function(){console.log("ATTACK"),console.log(this),this.isAttacking=!0},e.prototype.renderCharacter=function(t,e){if(this.isAttacking)o=e%5,this.attackAnimationMap[o]=1,this.attackAnimationMap.includes(0)||(this.isAttacking=!1,this.attackAnimationMap=[0,0,0,0,0]),t.drawImage(this.attackImg,64*o,0,64,64,this.x-this.camera.x,this.y-this.camera.y,64,64),console.log(this.attackAnimationMap);else{var o=e%4,i=this.srcX,s=this.srcY;(this.dirX||this.dirY)&&(s*=this.height*o+o+1),1===this.dirX?i+=this.width+1:-1===this.dirX?i+=3*this.width+3:-1===this.dirY&&(i+=2*this.width+2),t.drawImage(this.img,i,s,this.width,this.height,this.x-this.camera.x,this.y-this.camera.y,this.width,this.height)}},e.prototype.renderShadow=function(t){t.beginPath(),t.fillStyle="rgba(0, 0, 0, 0.2)",t.ellipse(this.x-this.camera.x+this.width/2,this.y-this.camera.y+this.height-2,this.width/2-5,5,0,0,180),t.fill()},e.prototype.updateCamera=function(){this.x+this.width>this.camera.x+n.Canvas.Width*e.FarEdgeDistFactor&&this.camera.update(1,0,this.stats.speed),this.x-this.camera.x<n.Canvas.Width*e.NearEdgeDistFactor&&this.camera.update(-1,0,this.stats.speed),this.y+this.height>this.camera.y+n.Canvas.Height*e.FarEdgeDistFactor&&this.camera.update(0,1,this.stats.speed),this.y-this.camera.y<n.Canvas.Height*e.NearEdgeDistFactor&&this.camera.update(0,-1,this.stats.speed)},e.PlayerId="player",e.FarEdgeDistFactor=.75,e.NearEdgeDistFactor=.25,e}(a.GameObject)},769:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var i=o(830),s=o(235),r=o(743),n=o(879),a=o(677),u=o(461),h=o(752),l=o(21);e.Game=function(){function t(){var e=this;this.gameObjects=new Map,this.tick=0,this.start=function(o){e.tick=Math.round(o/t.TickInterval),window.requestAnimationFrame(e.start),e.update(),e.render()},this.canvas=new s.Canvas("game"),this.keyboard=new n.Keyboard([n.Key.Left,n.Key.Right,n.Key.Up,n.Key.Down]),this.background=a.TileMap.createBackground(10,10);var o=new i.Camera(0,0,s.Canvas.Width,s.Canvas.Height,this.background);this.background.setCamera(o),this.canvas.addLayer(this.background);var h=new r.Player({x:5*a.TileMap.TSize,y:5*a.TileMap.TSize},o,this.background);this.gameObjects.set(h.id,h);var c=new l.PlayerUi(h);this.canvas.addLayer(c);for(var d=0;d<3;d++){var f=this.gameObjects.get(r.Player.PlayerId),p=f.x-2*a.TileMap.TSize+d*a.TileMap.TSize,y=f.y+3*a.TileMap.TSize,g=new u.BlobMonster({x:p,y},o,this.background);this.gameObjects.set(g.id,g)}this.gameObjects.forEach((function(t){return e.canvas.addLayer(t)}))}return t.prototype.run=function(){this.start(0),h.DEBUG.enabled&&console.log(this)},t.prototype.update=function(){var t=this;Array.from(this.gameObjects.values()).forEach((function(e){return e.update({gameObjects:t.gameObjects,keyboard:t.keyboard,tick:t.tick})}))},t.prototype.render=function(){this.canvas.clear(),this.canvas.render(this.tick)},t.TickInterval=100,t}()},879:(t,e)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=e.Key=void 0,function(t){t.Left="KeyA",t.Right="KeyD",t.Up="KeyW",t.Down="KeyS"}(o||(e.Key=o={}));var i=function(){function t(t){this.keys={},this.listenForEvents(t)}return t.prototype.listenForEvents=function(t){var e=this;window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this)),t.forEach((function(t){return e.keys[t]=!1}))},t.prototype.onKeyDown=function(t){var e=t.code;e in this.keys&&(t.preventDefault(),this.keys[e]=!0)},t.prototype.onKeyUp=function(t){var e=t.code;e in this.keys&&(t.preventDefault(),this.keys[e]=!1)},t.prototype.isDown=function(t){if(void 0===this.keys[t])throw new Error("Keycode "+t+" is not being listened to");return this.keys[t]},t.prototype.isAnyDown=function(t){for(var e=0;e<t.length;e++)if(this.keys[t[e]])return!0;return!1},t}();e.Keyboard=i},21:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerUi=void 0;var s=i(o(774)),r=i(o(658)),n=function(){function t(t){this.id="player-ui",this.hide=!1,this.layer=0,this.player=t,this.healthImg=new Image,this.healthImg.src=s.default,this.healthHalfImg=new Image,this.healthHalfImg.src=r.default}return Object.defineProperty(t.prototype,"playerHealth",{get:function(){return this.player.stats.health},enumerable:!1,configurable:!0}),t.prototype.render=function(t){for(var e=Math.floor(this.playerHealth),o=this.playerHealth%1>0,i=0;i<e;i++){var s=10+32*i+10*i;t.drawImage(this.healthImg,0,0,32,32,s,10,32,32),o&&t.drawImage(this.healthHalfImg,0,0,32,32,s+32+10,10,32,32)}},t.prototype.debug=function(t){t.font="24px sans-serif",t.fillText("Health: "+this.player.stats.health,10,66)},t}();e.PlayerUi=n},677:function(t,e,o){var i=this&&this.__spreadArray||function(t,e,o){if(o||2===arguments.length)for(var i,s=0,r=e.length;s<r;s++)!i&&s in e||(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TileMap=void 0;var r=o(43),n=s(o(3)),a=s(o(685));e.TileMap=function(){function t(t){this.startCol=0,this.endCol=0,this.startRow=0,this.endRow=0,this.offsetX=0,this.offsetY=0,this.id=t.id,this.hide=t.hide,this.layer=t.layer,this.tiles=t.tiles,this.cols=t.cols,this.rows=t.rows,this.tileMapImage=new Image,this.tileMapImage.src=a.default}return t.createEmptyTiles=function(t,e){for(var o=[],i=0;i<t;i++)for(var s=0;s<e;s++)o.push({type:r.TileType.Empty});return o},t.createBackground=function(e,o){var s=t.createEmptyTiles(e,o);return s.splice.apply(s,i([0,n.default.length],n.default,!1)),new t({id:t.BackgroundId,hide:!1,layer:999,tiles:s,cols:e,rows:o})},t.prototype.setCamera=function(t){this.camera=t},t.prototype.setTile=function(t,e,o){this.tiles[o*this.cols+e]=t},t.prototype.render=function(e){if(this.context=e,this.camera){this.startCol=Math.floor(this.camera.x/t.TSize),this.endCol=Math.ceil(this.startCol+this.camera.width/t.TSize),this.startRow=Math.floor(this.camera.y/t.TSize),this.endRow=Math.ceil(this.startRow+this.camera.height/t.TSize),this.offsetX=-this.camera.x+this.startCol*t.TSize,this.offsetY=-this.camera.y+this.startRow*t.TSize;for(var o=this.startCol;o<=this.endCol;o++)for(var i=this.startRow;i<=this.endRow;i++)r.TileHelper.render(this,o,i)}},t.prototype.debug=function(){},t.TSize=64,t.BackgroundId="background",t}()},43:function(t,e,o){var i,s=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.TileHelper=e.Tile=e.TileType=void 0;var r,n=o(752),a=o(677),u=o(593);!function(t){t[t.Empty=-1]="Empty",t[t.BeachBL=0]="BeachBL",t[t.BeachB=1]="BeachB",t[t.BeachBR=2]="BeachBR",t[t.BeachR=3]="BeachR",t[t.BeachTR=4]="BeachTR",t[t.BeachT=5]="BeachT",t[t.BeachTL=6]="BeachTL",t[t.BeachL=7]="BeachL",t[t.ShoreBL=8]="ShoreBL",t[t.ShoreB=9]="ShoreB",t[t.ShoreBR=10]="ShoreBR",t[t.ShoreR=11]="ShoreR",t[t.ShoreTR=12]="ShoreTR",t[t.ShoreT=13]="ShoreT",t[t.ShoreTL=14]="ShoreTL",t[t.ShoreL=15]="ShoreL",t[t.Sea=16]="Sea",t[t.Sand=17]="Sand",t[t.Sand2=18]="Sand2",t[t.GrassSandBL=19]="GrassSandBL",t[t.GrassSandB=20]="GrassSandB",t[t.GrassSandBR=21]="GrassSandBR",t[t.GrassSandR=22]="GrassSandR",t[t.GrassSandTR=23]="GrassSandTR",t[t.GrassSandT=24]="GrassSandT",t[t.GrassSandTL=25]="GrassSandTL",t[t.GrassSandL=26]="GrassSandL",t[t.GrassEmpty=27]="GrassEmpty",t[t.GrassPlant=28]="GrassPlant",t[t.GrassBlades=29]="GrassBlades"}(r||(e.TileType=r={}));var h=function(t){function e(e){var o=t.call(this,e.x,e.y,e.width,e.height)||this;return o.srcX=e.srcX,o.srcY=e.srcY,o.srcWidth=e.srcWidth,o.srcHeight=e.srcHeight,o.type=e.type,o.outOfBounds=e.outOfBounds,o}return s(e,t),e}(u.Rectangle);e.Tile=h;var l=function(){function t(){}return t.getTile=function(t,e,o){var i=t.tiles[o*t.cols+e];return i?new h({srcX:i.type*a.TileMap.TSize,srcY:0,srcWidth:a.TileMap.TSize,srcHeight:a.TileMap.TSize,x:Math.round((e-t.startCol)*a.TileMap.TSize+t.offsetX),y:Math.round((o-t.startRow)*a.TileMap.TSize+t.offsetY),width:a.TileMap.TSize,height:a.TileMap.TSize,type:i.type,outOfBounds:i.outOfBounds}):{}},t.render=function(e,o,i){var s=t.getTile(e,o,i);e.context.drawImage(e.tileMapImage,s.srcX,s.srcY,s.srcWidth,s.srcHeight,s.x,s.y,s.width,s.height),n.DEBUG.enabled&&t.debug(e,s)},t.debug=function(t,e){void 0!==e.type&&(t.context.beginPath(),t.context.lineWidth=1,t.context.strokeStyle="rgba(255, 0, 0, 0.2)",t.context.strokeRect(e.x,e.y,a.TileMap.TSize,a.TileMap.TSize),t.context.closePath(),t.context.font="12px sans-serif",t.context.fillStyle="purple",t.context.fillText(e.type+"",e.x,e.y+12)),e.outOfBounds&&(t.context.beginPath(),t.context.fillStyle="rgba(255, 0, 0, 0.2)",t.context.fillRect(e.x,e.y,a.TileMap.TSize,a.TileMap.TSize),t.context.closePath())},t}();e.TileHelper=l},593:function(t,e){var o=this&&this.__spreadArray||function(t,e,o){if(o||2===arguments.length)for(var i,s=0,r=e.length;s<r;s++)!i&&s in e||(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.rgbArrayOpacity=e.rgbArrayToString=e.degToRad=e.getRandomInt=e.Vector=e.Circle=e.Rectangle=void 0;var i=function(){function t(t,e,o,i){this.x=t,this.y=e,this.width=o,this.height=i}return Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.x+Math.floor(this.width/2),y:this.y+Math.floor(this.height/2)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertices",{get:function(){return[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height},{x:this.x,y:this.y+this.height}]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this.vertices[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.vertices[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"c",{get:function(){return this.vertices[2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"d",{get:function(){return this.vertices[3]},enumerable:!1,configurable:!0}),t}();e.Rectangle=i;var s=function(){function t(t,e){this.origin=t,this.radius=e,this.circumference=2*Math.PI*e,this.diameter=2*e}return Object.defineProperty(t.prototype,"x",{get:function(){return this.origin.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.origin.y},enumerable:!1,configurable:!0}),t}();e.Circle=s;var r=function(){function t(t,e){this.x=e.x-t.x,this.y=e.y-t.y}return t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t}();e.Vector=r,e.getRandomInt=function(t){return Math.floor(Math.random()*t)},e.degToRad=function(t){return Math.PI/180*t},e.rgbArrayToString=function(t){return"rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(t[3]?t[3]:1,")")},e.rgbArrayOpacity=function(t,e){var i=o([],t,!0);return i[3]=e,i}},341:(t,e,o)=>{t.exports=o.p+"cedf0d97913fe77637f4.png"},658:(t,e,o)=>{t.exports=o.p+"55556d84c9bd44a03073.png"},774:(t,e,o)=>{t.exports=o.p+"d048c16cec444b3d4f0c.png"},360:(t,e,o)=>{t.exports=o.p+"057c17273e90401ccbc6.png"},6:(t,e,o)=>{t.exports=o.p+"9d7d04c63d3b42add5f5.png"},685:(t,e,o)=>{t.exports=o.p+"9affec3a20710f51ccb4.png"},3:t=>{t.exports=JSON.parse('[{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":24,"outOfBounds":false},{"type":9,"outOfBounds":false},{"type":9,"outOfBounds":false},{"type":9,"outOfBounds":false},{"type":9,"outOfBounds":false},{"type":9,"outOfBounds":false},{"type":9,"outOfBounds":false},{"type":23,"outOfBounds":false},{"type":16,"outOfBounds":true},{"type":16,"outOfBounds":true},{"type":11,"outOfBounds":false},{"type":20,"outOfBounds":false},{"type":1,"outOfBounds":false},{"type":1,"outOfBounds":false},{"type":1,"outOfBounds":false},{"type":1,"outOfBounds":false},{"type":19,"outOfBounds":false},{"type":8,"outOfBounds":false},{"type":9,"outOfBounds":false},{"type":9,"outOfBounds":false},{"type":10,"outOfBounds":false},{"type":3,"outOfBounds":false},{"type":26,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":26,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":0,"outOfBounds":false},{"type":1,"outOfBounds":false},{"type":1,"outOfBounds":false},{"type":1,"outOfBounds":false},{"type":1,"outOfBounds":false},{"type":2,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":26,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":32,"outOfBounds":false},{"type":32,"outOfBounds":false},{"type":31,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":26,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":33,"outOfBounds":false},{"type":32,"outOfBounds":false},{"type":32,"outOfBounds":false},{"type":40,"outOfBounds":false},{"type":39,"outOfBounds":false},{"type":30,"outOfBounds":false},{"type":26,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":26,"outOfBounds":false},{"type":34,"outOfBounds":false},{"type":40,"outOfBounds":false},{"type":41,"outOfBounds":false},{"type":41,"outOfBounds":false},{"type":39,"outOfBounds":false},{"type":35,"outOfBounds":false},{"type":32,"outOfBounds":false},{"type":32,"outOfBounds":false},{"type":31,"outOfBounds":false},{"type":33,"outOfBounds":false},{"type":36,"outOfBounds":false},{"type":39,"outOfBounds":false},{"type":39,"outOfBounds":false},{"type":39,"outOfBounds":false},{"type":41,"outOfBounds":false},{"type":39,"outOfBounds":false},{"type":40,"outOfBounds":false},{"type":41,"outOfBounds":false},{"type":30,"outOfBounds":false},{"type":34,"outOfBounds":false},{"type":39,"outOfBounds":false},{"type":40,"outOfBounds":false},{"type":39,"outOfBounds":false}]')},969:t=>{t.exports=JSON.parse('[{"type":0,"outOfBounds":false},{"type":1,"outOfBounds":false},{"type":2,"outOfBounds":false},{"type":3,"outOfBounds":false},{"type":4,"outOfBounds":false},{"type":5,"outOfBounds":false},{"type":6,"outOfBounds":false},{"type":7,"outOfBounds":false},{"type":8,"outOfBounds":false},{"type":9,"outOfBounds":false},{"type":10,"outOfBounds":false},{"type":11,"outOfBounds":false},{"type":12,"outOfBounds":false},{"type":13,"outOfBounds":false},{"type":14,"outOfBounds":false},{"type":15,"outOfBounds":false},{"type":16,"outOfBounds":true},{"type":17,"outOfBounds":false},{"type":18,"outOfBounds":false},{"type":19,"outOfBounds":false},{"type":20,"outOfBounds":false},{"type":21,"outOfBounds":false},{"type":22,"outOfBounds":false},{"type":23,"outOfBounds":false},{"type":24,"outOfBounds":false},{"type":25,"outOfBounds":false},{"type":26,"outOfBounds":false},{"type":27,"outOfBounds":false},{"type":28,"outOfBounds":false},{"type":29,"outOfBounds":false},{"type":30,"outOfBounds":false},{"type":31,"outOfBounds":false},{"type":32,"outOfBounds":false},{"type":33,"outOfBounds":false},{"type":34,"outOfBounds":false},{"type":35,"outOfBounds":false},{"type":36,"outOfBounds":false},{"type":37,"outOfBounds":false},{"type":38,"outOfBounds":false},{"type":39,"outOfBounds":false},{"type":40,"outOfBounds":false},{"type":41,"outOfBounds":false}]')}},e={};function o(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,o),r.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var s=i.length-1;s>-1&&!t;)t=i[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),o(752)})();
//# sourceMappingURL=bundle.js.map